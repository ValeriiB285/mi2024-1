ВАРІАНТ 9. Кіберінциденти (Cyber Incident Tracker)

Створи найпростіший прототип інформаційно-аналітичної системи (ІАС) у зв’язці PostgreSQL → FastAPI → Web (HTML+JS+CSS).
Система має зберігати події в базі даних, віддавати їх через API та показувати на веб-дашборді KPI, графіки, heatmap і таблицю.
Без авторизації, логування, Docker, міграцій та інших ускладнень.

Підготуй структуру проєкту:

у корені: main.py, .env, папки sql/ та web/
у sql/: файл init.sql
у web/: файли index.html, app.js, styles.css

Налаштуй .env:
залиш тільки один параметр DATABASE_URL для підключення до БД PostgreSQL ex2025a.

Створи та заповни базу даних:

у sql/init.sql напиши скрипт, який створює таблицю подій у схемі public:

cyber_incidents (
  id,
  occurred_at (час події),
  system_zone, incident_type, severity_band, status (текстові поля-категорії),
  affected_assets (уражені активи) [числове],
  severity (серйозність (1–10)) [числове],
  source,
  confirmed,
  notes
)

- додай індекси мінімум по occurred_at та по основній категорії (system_zone)
- заповни таблицю 500 тестовими рядками через generate_series з випадковими значеннями
  (дати за останні ~120 днів)
- перевір, що SELECT count(*) повертає 500.

Реалізуй бекенд на FastAPI в main.py:

- зчитай DATABASE_URL з .env
- підключи SQLAlchemy і опиши ORM-модель для таблиці подій
- увімкни CORS для локального фронтенду (localhost:5500 та/або 5173)
- переконайся, що всі ендпоінти коректно працюють без помилок

Запусти бекенд:
- командою uvicorn main:app --reload --port 8000
- перевір у браузері http://localhost:8000/docs та виконай тестові запити (KPI, trend, список подій limit=5).

Додай ендпоінти:

GET /health — перевірка роботи

GET /incidents — список подій з пагінацією limit/offset і фільтрами:
- start/end (по occurred_at)
- system_zone, incident_type, severity_band (опційно)
- min_value (по severity)
- confirmed (true/false)

GET /incidents/{id} — деталі події

GET /kpi — агрегати:
- кількість подій
- сума числового поля affected_assets
- середнє значення severity
- топ-категорія за incident_type

GET /trend — тренд по днях або тижнях (bucket=day|week):
- кількість подій
- сума affected_assets

GET /distribution/system_zone — розподіл по system_zone
GET /distribution/severity_band — розподіл по severity_band

GET /heatmap — дані для теплової карти “incident_type × тиждень” у вигляді:
- осі (список значень категорії, список тижнів)
- матриця чисел (наприклад, сума affected_assets або кількість подій)

Реалізуй фронтенд у папці web/:

index.html має містити:
- заголовок дашборду
- блок фільтрів (start/end, категорія-1, min_value, confirmed) з кнопками “Застосувати/Скинути”
- 4 KPI-картки
- графік тренду (перемикач Day/Week)
- 2 стовпчикові діаграми розподілів
- heatmap-блок
- таблицю подій з кнопками пагінації Prev/Next і модальним вікном деталей

app.js має:
- робити запити fetch до API http://localhost:8000
- підставляти фільтри як query-параметри
- рендерити KPI, графіки (Chart.js через CDN), heatmap, таблицю
- відкривати модальне вікно з деталями при кліку на рядок таблиці

styles.css має:
- оформити сторінку у вигляді “карток”
- зробити адаптивний вигляд (на вузькому екрані блоки стають один під одним)
- стилізувати таблицю та heatmap (заливка клітинок залежно від значення)

Запусти фронтенд:
- з кореня проєкту запусти python -m http.server 5500
- відкрий http://localhost:5500/web/
- переконайся, що: статус API “OK”, фільтри змінюють KPI/графіки/таблицю, пагінація працює, модальне вікно відкриває деталі події.

Підсумковий результат:
у проєкті мають бути файли sql/init.sql, main.py, web/index.html, web/app.js, web/styles.css, .env
система має запускатися локально та показувати дані з БД у вигляді KPI, тренду, розподілів, heatmap і таблиці.
